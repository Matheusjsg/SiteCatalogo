<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Catálogo Bélico</title>
  <link rel="stylesheet" th:href="@{/style.css}"/>
  
  <!-- Bootstrap CSS e JS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   <!-- Inclui a biblioteca de ícones Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  
</head>

<div th:replace="fragments/header :: cabecalho"></div>  

<body>

      
<section class="hero">

  <!-- Exibe o título do catálogo com base na categoria selecionada -->

  <div th:if="${categoria != null and categoria.equalsIgnoreCase('munições')}">
    <h1>Catálogo de Munições</h1>
    <p style="color: black;">Nossas vendas são realizadas presencialmente de acordo com as normas e regulamentações vigentes, mediante apresentação de documentos legais.</p>
  </div>

  <div th:if="${categoria != null and categoria.equalsIgnoreCase('equipamentos')}">
    <h1>Catálogo de Equipamentos Bélico</h1>
    <p style="color: black;">Explore nossos produtos de alta qualidade.</p>
  </div>

  <div th:if="${categoria != null and categoria.equalsIgnoreCase('tiroesportivo')}">
    <h1>Catálogo de Tiro Esportivo</h1>
    <p style="color: black;">Explore nossa linha completa de armamentos para tiro esportivo.</p>
  </div>

  <div th:if="${categoria != null and categoria.equalsIgnoreCase('carabinas')}">
      <h1>Catálogo de Carabinas - Airsoft - Airgun</h1>
      <p style="color: black;">Pra quem busca conciliar diversão e treinamento.</p>
  </div>

  <div th:if="${categoria != null and categoria.equalsIgnoreCase('acessórios')}">
    <h1>Catálogo de Acessórios</h1>
    <p style="color: black;" >Explore nossa linha completa de acessórios para armamentos.</p>
  </div>

</section>

<section class="produtos container">

     <div class="grid-produtos"> 

      <div class="card" th:each="produto : ${produtos}" th:if="${produtos != null}">

            <!-- Carrossel de imagens -->
            <div th:if="${produto.imagens != null and #lists.size(produto.imagens) > 0}">
              <div th:id="'carouselProduto_' + ${produto.id}" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  <div th:each="img, iterStat : ${produto.imagens}"
                      th:class="'carousel-item' + (${iterStat.index == 0} ? ' active' : '')">
                    <img th:src="@{'/uploads/' + ${img.nomeArquivo}}" class="d-block w-100" alt="Imagem do produto" style="max-height: 300x; object-fit: contain;">
                  </div>
                </div>

                  <!-- Botões de navegação -->
                  <button class="carousel-control-prev" type="button"
                          th:attr="data-bs-target='#carouselProduto_' + ${produto.id}" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                  </button>
                  <button class="carousel-control-next" type="button"
                          th:attr="data-bs-target='#carouselProduto_' + ${produto.id}" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                  </button>
                </div>
              </div>

            <!-- Informações do produto -->
            <h5 th:text="${produto.nome}"></h5>
           
            <p style="font-size: 1rem; text-align: center; white-space: pre-wrap;" 
            th:utext="${#strings.replace(produto.descricaolink, '\n', '<br/>')}"></p>
           
           
          <div class="card-actions">
                <button style="background-color: rgb(0, 0, 255);"  class="btn-action add-to-cart-btn"
                          th:attr="data-id=${produto.id}, 
                          data-name=${produto.nome}, 
                          data-price=${produto.preco}, 
                          data-image=@{'/uploads/' + ${#lists.size(produto.imagens) > 0 ? produto.imagens[0].nomeArquivo : 'placeholder.jpg'}}">
                          <span class="currency">R$</span>
                          <span class="amount" th:text="${produto.preco}"></span> 
                          | Adicionar ao Carrinho
                </button>

                <a th:href="@{/categoria/{categoria}/{slug}(categoria=${produto.categoria.nome}, slug=${produto.slug})}">
                      <button  style="background-color: rgb(48, 73, 73);"  class="btn-action details-btn">
                      Ver detalhes
                      </button>
                </a>
            </div>
            
      
  </div>

   
   
   
            


</section>

<!-- Nova Seção do Carrinho de Compras -->
<section id="cart-section" class="cart-section container">
    <h2 class="h4 text-center mb-4"><i class="fas fa-shopping-cart me-2"></i> Seu Carrinho</h2>
    <div id="cart-content">
        <!-- Lista de Itens do Carrinho -->
        <ul  id="cart-list" class="list-group list-group-flush">
            <!-- Itens do carrinho serão inseridos aqui pelo JavaScript -->
        </ul>
        <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
            <h5 class="mb-0">Total:</h5>
            <span id="cart-total" class="h3 fw-bold text-primary">R$ 0,00</span>
        </div>
        
        <!-- Botão para enviar mensagem via WhatsApp -->
        <button id="send-whatsapp-btn" class="btn btn-success w-100 mt-3">
            <i class="fab fa-whatsapp me-2"></i> Enviar Pedido via WhatsApp
        </button>
    </div>
</section>


<script src="/js/cart.js"></script>

</body>
</html>

<br><br><br>

  <footer>
    <div class="container">
      <p>&copy; 2025 CP Tática. Todos os direitos reservados.</p>
    </div>
  </footer>
